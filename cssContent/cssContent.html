
<!DOCTYPE html>

<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta content="width=device-width,initial-scale=1" name="viewport">
		<title>CSS Content Test</title>
		<link rel="Stylesheet" href="cssContent.css" type="text/css">
<style>
</style>
	</head>
	<body>
		<header>
		<h1>CSS Content Test</h1>
		</header>
		<main>
			<section>
				<h2>Explainer</h2>
				<p>According to <a href="https://www.w3.org/TR/WCAG20-TECHS/F87.html">WCAG Common Failure F87</a> you shouldn't use CSS to inject important content.  This page is to test that.</p>
				<h3>Content on plain content</h3>
				<p id="p1" class="c1">This is a basic paragraph with a <code>::before</code>.</p>

				<h3>Content on non-form tabable content with <code>tabindex=0</code></h3>
				<p id="p2" tabindex="0" class="c1">This is a tabable paragraph with some <code>::before</code> content</p>

				<h3>Content with link with content</h3>
				<p id="p3">This is a paragraph with a <a href="#" id="a1" class="c1">a link with <code>::before</code> content</a>.</p>

				<h3>Content with a button</h3>
				<button id="b1" class="c1">A Button</button>

				<h3>Text input with content</h3>
				<label for="txt1" id="lbl1" class="c1">Enter some text</label>
				<input id="txt1">

				<h3>Fieldset with with content</h3>
				<fieldset class="c1">
					<legend>Pick one</legend>
					<input id="r1" name="rb" type="radio"><label for="r1">Option 1</label>
					<input id="r2" name="rb" type="radio"><label for="r2">Option 2</label>
					<input id="r3" name="rb" type="radio"><label for="r3">Option 3</label>
				</fieldset>
				<h3>Fieldset with legend with content</h3>
				<fieldset>
					<legend class="c1">Pick some</legend>
					<input id="c1" type="checkbox"><label for="c1">Option 1</label>
					<input id="c2" type="checkbox"><label for="c2">Option 2</label>
					<input id="c3" type="checkbox"><label for="c3">Option 3</label>
				</fieldset>

				<h3>Submit button with content</h3>
				<input type="submit" class="c1" value="Click me">
			</section>

			<section>
				<h2>Screen Reader Results</h2>
				<dl>
					<dt>VoiceOver Mac OS X</dt>
					<dd>
						<dl>
							<dt>Safari, Chrome, Firefox</dt>
							<dd>In browse mode (control+option+arrow keys) the pseudo-content is always read if it is visible ("star stuff...".)  When tabbing, it's read when it's visible, except on <code>&lt;fieldset&gt;</code>.  But it is read as part of the <code>&lt;legend&gt;</code>.</dd>
						</dl>
					</dd>
					<dt>VoiceOver oOS</dt>
					<dd>
						<dl>
							<dt>Safari</dt>
							<dd>In browse mode (swipe left/right) the pseudo-content is always read if it is visible ("star stuff...".)  When using the rotor (links/form controls), it's read when it's visible, except on <code>&lt;fieldset&gt;</code> even when it's part of the <code>&lt;legend&gt;</code>.  But this is a VoiceOver iOS issue; the <code>&lt;legend&gt;</code> is never read when swiping up/down with rotor on Form Controls.</dd>
						</dl>
					</dd>
					<dt>NVDA 2021.3.1</dt>
					<dd>
						<dl>
							<dt>Firefox</dt>
							<dd>In browse mode, the pseudo-content is always read if it's visible.  When you get to the <code>&lt;fieldset&gt;</code>, first it reads "group start" then when you press <kbd>down arrow-key</kbd> it says "star stuff".  When it's applied to the <code>&lt;legend&gt;</code> you hear "grouping start star stuff pick some" without having to hit <kbd>down arrow-key</kbd>.  In Forms Mode (tabbing through the page) it's read in all places except with it's applied to <code>&lt;fieldset&gt;</code>, but it is read when aplied to <code>&lt;legend&gt;</code> as part of the <code>&lt;legend&gt;</code> text.</dd>

							<dt>Chrome and Edge</dt>
							<dd>In browse mode, the pseudo-content is always read if it's visible.  When you get to the <code>&lt;fieldset&gt;</code>, first it reads "group start" then when you press <kbd>down arrow-key</kbd> it says "star stuff".  When it's applied to the <code>&lt;legend&gt;</code> you hear "grouping start star stuff pick some" without having to hit <kbd>down arrow-key</kbd>.  In Forms Mode (tabbing through the page) it's read in all places except with it's applied to either <code>&lt;fieldset&gt;</code> or <code>&lt;legend&gt;</code>.</dd>
					</dd>
					<dt>JAWS 2021</dt>
					<dd>
						<dl>
							<dt>Firefox</dt>
							<dd>In browse mode, the pseudo-content is always read if it's visible.  When you get to the <code>&lt;fieldset&gt;</code>, first it reads "group start" then when you press <kbd>down arrow-key</kbd> it says "star stuff".  When it's applied to the <code>&lt;legend&gt;</code> you hear "grouping start star stuff pick some" without having to hit <kbd>down arrow-key</kbd>.  In Forms Mode (tabbing through the page) it's read in all places except with it's applied to <code>&lt;fieldset&gt;</code>, but it is read when aplied to <code>&lt;legend&gt;</code> as part of the <code>&lt;legend&gt;</code> text.  (Note: JAWS is not reading the content of <code>&lt;p tabindex="0"&gt;</code> in forms mode.)</dd>

							<dt>Chrome</dt>
							<dd>In browse mode, the pseudo-content is always read if it's visible.  When you get to the <code>&lt;fieldset&gt;</code>, first it reads "group start" then when you press <kbd>down arrow-key</kbd> it says "star stuff".  When it's applied to the <code>&lt;legend&gt;</code> you hear "grouping start star stuff pick some" without having to hit <kbd>down arrow-key</kbd>.  In Forms Mode (tabbing through the page) it's read in all places except with it's applied to either <code>&lt;fieldset&gt;</code> or <code>&lt;legend&gt;</code>.</dd>
							<dt>Edge</dt>
							<dd><dd>In browse mode, the pseudo-content is always read if it's visible.  When you get to the <code>&lt;fieldset&gt;</code>, first it reads "group start pick one" then when you press <kbd>down arrow-key</kbd> it says "star stuff".  When it's applied to the <code>&lt;legend&gt;</code> you hear "grouping start pick some" without having to hit <kbd>down arrow-key</kbd>.  In Forms Mode (tabbing through the page) it's read in all places except with it's applied to either <code>&lt;fieldset&gt;</code> or <code>&lt;legend&gt;</code>.</dd></dd>
						</dl>
					</dd>
					<dt>Narrator</dt>
					<dd>
						<dl>
							<dt>Firefox 98</dt>
							<dd>In regular mode whilst reading the whole document top to bottom: the pseudo-content is always read if it's visible.  When reading one line at a time (<kbd>Ins+O</kbd>) then the pseudo-content is <strong>not</strong> read in anything except for links.  When tabbing through the page, when it gets to the paragraph with <code>tabindex="0"</code> none of the content is read.  The Pseudo-content is read when it part of the link text or a form element's <code>&lt;label&gt;</code>.  When you get to the <code>&lt;fieldset&gt;</code>s, as you land on the radio buttons or checkboxes, the <code>&lt;legend&gt;</code> text is not read at all.</dd>
							<dt>Chrrome</dt>
							<dd>When reading line by line (<kbd>Ins+O</kbd>), the pseudo-content is always read.  When you get to the <code>&lt;fieldset&gt;</code> with the pseudo-code on the <code>&lt;fieldset&gt;</code>, the pseudo-content is read first, then the <code>&lt;legend&gt;</code> text.  When tabbing through the page, it does read the pseudo-content, except for the <code>&lt;fieldset&gt;</code>s, where the <code>&lt;legend&gt;</code> text is not read at all (like with Firefox)</dd>
							<dt>Edge</dt>
							<dd>When reading the whole document top to bottom, the pseudo-content is always read if visible.  Interestingly enough, when reading one line at a time (<kbd>Ins+O</kbd>), Narrator only reads the first thing in the next line.  So if there's a link in a paragraph, it will only read the paragraph text up to, but not including the link.  Even when trying to read the whole current line (<kbd>Ins+I</kbd>), it won't actually read the whole line.  As a result content added with <code>::before</code> will be read; but only that content; except when the first thing in the line is a form element (button or input).  In "Content with a button" and "Text input with content" above, the pseudo content is read.  When you get to the <code>&lt;fieldset&gt;</code> with the pseudo-content, first it reads the pseudo-content, then the <code>&lt;legend&gt;</code> text, then the radio buttons.  When you get to the <code>&lt;fieldset&gt;</code> with the <code>&lt;legend&gt;</code> with the pseudo-content, it doesn't read the actual <code>&lt;legend&gt;</code> text; <em>just</em> the pseudo-content.  When tabbing through the page, the pseudo-content is always read except when applied to either <code>&lt;fieldset&gt;</code> or <code>&lt;legend&gt;</code>.  (Interestingly enough, when viewing a list of all links, you bookmarklets are listed as links on the page.)</dd>
						</dl>
					</dd>
				</dd>
			</section>
			<section>
				<h2>Conclusions and Recommendations</h2>
				<p>With the exception of <code>&lt;fieldset&gt;</code>s and <code>&lt;legend&gt;</code>s, adding text content with CSS actually enjoys robust support as of early 2022!  But <a href="https://www.w3.org/TR/WCAG20-TECHS/F87.html">WCAG Common Failure F87</a> still exists. I don't want to tell anyone to disgregard that Common Failure.  There may be other tests I'm not running, like voice control, or custom stylesheets.</p>
				<p>Incidentally, the User Agent Support notes for F87 says: <q cite="https://www.w3.org/WAI/WCAG20/Techniques/ua-notes/failures#F87">:before and :after are not supported by IE7 and lower</q>.  In 2022, whow's even using IE, let along IE7 or below?</p>
				<p>Then again, the Common Failure text says:<q cite="https://www.w3.org/TR/WCAG20-TECHS/F87.html">For users who need to <em>customize or turn off style information</em> in order to view content according to their needs, assistive technologies may not be able to access the information that is inserted using CSS. </q>.  So this isn't even about screen readers. I wonder how many real-world examples there are of this.  So many websites use CSS styles to hide and reveal content that turning off styling is going to have major implications.  In fact, this pattern is so common in forms, that no customizable system worth its salt would ignore <code>::before</code> and <code>::after</code> content.</p>
				<p>Also don't add <code>tabindex="0"</code> to non-interactive content just to expose it to Screen Readers in Forms mode.  It doesn't always work!</p>
			</section>
		<main>
		</main>
	</body>
</html>
