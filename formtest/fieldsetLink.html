<!DOCTYPE html>

<html lang="en">
	<head>
		<meta charset="utf-8">
		<title>Fieldset with Link</title>
		

		<style>
body{
	counter-reset: section;
}
			[role="listitem"]::before{
				counter-increment: section;
				content: counter(section) ". ";
			}
			.req {
				color: #CC0000;
			}
			#listy {
				display: block;
			}
[role="listitem"] {
  	display: block; /*list-item;*/
}
.invisibleStuff {
	clip: rect(1px, 1px, 10px, 100px);
	height: 1em !important;
	margin: 0 !important;
	overflow: hidden !important;
	position: absolute;
	width: 70px !important;	
}			
	</style>
	</head>

	<body>
		<header>
			<h1>Fieldset with Link</h1>
		</header>
		<main>
		<div id="contentPane">
			<p>This page is to test how various AT deals with links being in <code>&lt;fieldset&gt;/&lt;legend&gt;</code>s; having an ordered list as part of a <code>&lt;legend&gt;</code> and referring to parts of the <code>&lt;legend&gt;</code> using <code>aria-describedby</code> in the radio buttons' <code>&lt;label&gt;</code>.</p>
			<section>
				<h2>Test Code</h2>
				<form method="get" id="myForm1" autocomplete="off">
					<div>
						<label for="name">Name:</label>
						<input type="text" id="name" name="name" autocomplete="off">
					</div>
					<br>
					<p>This form doesn't need a submit button.</p>
					<fieldset id="radioFieldset">
						<legend>Radio buttons.  Ahh yes some radio buttons, and there ain't no link here.</legend>
						<input type="radio" value="a" id="rd_a" name="rd">
						<label for="rd_a">Option 1</label><br><br>
						<input type="radio" value="b" id="rd_b" name="rd">
						<label for="rd_b">Option 2</label><br><br>
						<input type="radio" value="c" id="rd_c" name="rd">
						<label for="rd_c">Option 3</label><br><br>
						<input type="radio" value="d" id="rd_d" name="rd">
						<label for="rd_d">Option 4</label><br><br>
						<input type="radio" value="e" id="rd_e" name="rd">
						<label for="rd_e">Option 5</label><br><br>
						<input type="radio" value="f" id="rd_f" name="rd">
						<label for="rd_f">Option 6</label><br><br>
					</fieldset>
					<div>
						<label for="name1">Name 1:</label>
						<input type="text" id="name1" name="name1" autocomplete="off">
					</div>
					<br>
					<p>This form doesn't need a submit button.</p>
					<fieldset id="radioFieldset1">
						<legend>Radio buttons.  Ahh yes <a href="https://www.google.ca">Loveley, wonderful Radio</a> buttons.</legend>
						<input type="radio" value="a" id="rd_a1" name="rd1">
						<label for="rd_a1">Option 1</label><br><br>
						<input type="radio" value="b" id="rd_b1" name="rd1">
						<label for="rd_b1">Option 2</label><br><br>
						<input type="radio" value="c" id="rd_c1" name="rd1">
						<label for="rd_c1">Option 3</label><br><br>
						<input type="radio" value="d" id="rd_d1" name="rd1">
						<label for="rd_d1">Option 4</label><br><br>
						<input type="radio" value="e" id="rd_e1" name="rd1">
						<label for="rd_e1">Option 5</label><br><br>
						<input type="radio" value="f" id="rd_f1" name="rd1">
						<label for="rd_f1">Option 6</label><br><br>
					</fieldset>
					<div>
						<label for="name2">Name 2:</label>
						<input type="text" id="name2" name="name2" autocomplete="off">
					</div>
					<div>
						<fieldset id="radioFieldset2">
							<legend>Please put the following <a href="https://www.google.ca">Loveley, wonderful Radio</a> buttons in order.
								<span id="listy" role="list">
									<span role="listitem" id="item1">Item 1</span>
									<span role="listitem" id="item2">Item 2</span>
									<span role="listitem" id="item3">Item 3</span>
								</span>
							</legend>
							<input type="radio" value="a" id="rd_a2" name="rd2" aria-describedby="item1 then item3 then item2">
							<label for="rd_a2">1, 3, 2</label><br><br>
							<input type="radio" value="b" id="rd_b2" name="rd2" aria-describedby="item1 then item2 then item3">
							<label for="rd_b2">1, 2, 3</label><br><br>
							<input type="radio" value="c" id="rd_c2" name="rd2" aria-describedby="item3 then item2 then item1">
							<label for="rd_c2">3, 2, 1</label><br><br>
							<input type="radio" value="d" id="rd_d2" name="rd2" aria-describedby="item3 then item1 then item2">
							<label for="rd_d2">3, 1, 2</label><br><br>
						</fieldset>
					</div>
					<div>
						<label for="name3">Name 3:</label>
						<input type="text" id="name3" name="name3" autocomplete="off">
					</div>
				</form>
			</section>
			<section>
				<h2>Results</h2>
				<section>
					<h3>VoiceOver on OS X Catalina</h3>
					<ul>
						<li>VoiceOver reads the <code>&lt;legend&gt;</code> only when tabbing into a <code>&lt;fieldset&gt;</code> from above or below.  And it reads it last.  On Safari, the <code>&lt;legend&gt;</code> is read out twice.</li>
						<li>When there's a link in the <code>&lt;legend&gt;</code>, and you <kbd>Tab</kbd> to the link: first it reads out the word "link" followed by the link text.  Then it reads out the <code>&lt;legend&gt;</code> (twice in Safari) followed by the word "Group".</li>
						<li>Then when you tab into the radio buttons, VoiceOver reads out the <code>&lt;label&gt;</code> text, "radio button, x of y".  (Safari follows that up with the <code>&lt;legend&gt;</code> text.)</li>
						<li>When <kbd>Shift+Tab</kbd>ing from the radio buttons to the <code>&lt;legend&gt;</code>'s link, it reads out "link" followed by the link text.  Safari then reads out the <code>&lt;legend&gt;</code> text.</li>
						<li>When there's a link in the legend and there's an <code>role="list"</code> in the <code>&lt;legend&gt;</code>, when the link is <kbd>Tab</kbd>'d to, the <code>&lt;legend&gt;</code> is read out as above.  The list items are read out with their number (ie: "one item one")</li>
						<li>When <kbd>Tab</kbd>ing to the radio buttons that have <code>aria-describedby</code> first the <code>&lt;label&gt;</code> text is read followed by "radio button x of y", then it reads out all the <code>aria-describedby</code> contents, including the <code>display:none</code> "then" <code>&lt;span&gt;</code>.  Note that Chromium browsers (Chrome, Edge) only read out "then" the first time.  ex: "one item one then 2 item two 3 item three"</li>
						<li>When <kbd>Shift+Tab</kbd>ing into the <code>&lt;fieldset&gt;</code>, first the <code>&lt;label&gt;</code> text is read followed by "radio button x of y" followed by the <code>&lt;legend&gt;</code> text then "group".  Then it reads out all the <code>aria-describedby</code> contents as above.</li>
					</ul>
				</section>
			</section>
			<section>
				<h2>Summary</h2>
			</section>
		</div>
		</main>
		<footer><span style="display: none;" id="then">then</span></footer>
	</body>
</html>
